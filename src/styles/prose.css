:root {
  .prose {
    --tw-prose-body: var(--foreground);
    --tw-prose-headings: var(--foreground-accent);
    --tw-prose-lead: #4b5563;
    --tw-prose-links: var(--foreground-accent);
    --tw-prose-bold: var(--foreground-accent);
    --tw-prose-counters: #6b7280;
    --tw-prose-bullets: #d1d5db;
    --tw-prose-hr: var(--border);
    --tw-prose-quotes: var(--muted-foreground);
    --tw-prose-quote-borders: var(--primary);
    --tw-prose-captions: #6b7280;
    --tw-prose-kbd: var(--foreground-accent);
    --tw-prose-kbd-shadows: 17 24 39;
    --tw-prose-code: var(--foreground-accent);
    --tw-prose-pre-code: var(--foreground);
    --tw-prose-pre-bg: var(--muted);
    --tw-prose-th-borders: var(--border);
    --tw-prose-td-borders: var(--border-accent);
  }

  .prose {
    /* 인라인 코드 */
    :not(pre) > code {
      @apply bg-surface mx-1 rounded-sm px-2 py-1 font-normal;

      &:before,
      &:after {
        content: none;
      }
    }

    /* 코드 타이틀 */
    figcaption[data-rehype-pretty-code-title] {
      @apply bg-surface text-foreground-muted mt-3 rounded-t-lg px-3 py-2 text-sm;
      user-select: none;
    }

    figcaption[data-rehype-pretty-code-title] + pre {
      @apply mt-0 rounded-sm rounded-t-none;
    }

    /* 하이라이팅 */
    :where(mark):not(:where([class~='not-prose'], [class~='not-prose'] *)) {
      @apply bg-surface rounded-sm px-1.5 py-0.5 text-foreground-accent;
    }

    /* 인용구 */
    :where(blockquote):not(:where([class~='not-prose'], [class~='not-prose'] *)) {
      @apply border-none p-0 not-italic;
    }

    :where(h2):not(:where([class~='not-prose'], [class~='not-prose'] *)) {
      @apply mb-8 mt-24 text-xl;
    }

    :where(h3):not(:where([class~='not-prose'], [class~='not-prose'] *)) {
      @apply mt-20 text-lg;
    }

    :where(h2 + *):not(:where([class~='not-prose'], [class~='not-prose'] *)) {
      @apply mb-6 mt-0;
    }

    :where(p):not(:where([class~='not-prose'], [class~='not-prose'] *)) {
      @apply mb-7 mt-0;
    }

    :where(a):not(:where([class~='not-prose'], [class~='not-prose'] *)) {
      @apply text-foreground-accent decoration-border-accent underline-offset-2;
    }

    :where(a.external-link):not(:where([class~='not-prose'], [class~='not-prose'] *)) {
      &::after {
        @apply ml-1 inline-block h-4 w-4 align-middle content-[''];
        background: url('data:image/svg+xml, <svg viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg"><rect fill="none" height="256" width="256"/><path d="M122.3,71.4l19.8-19.8a44.1,44.1,0,0,1,62.3,62.3l-28.3,28.2a43.9,43.9,0,0,1-62.2,0" fill="none" stroke="%23374151" stroke-linecap="round" stroke-linejoin="round" stroke-width="8"/><path d="M133.7,184.6l-19.8,19.8a44.1,44.1,0,0,1-62.3-62.3l28.3-28.2a43.9,43.9,0,0,1,62.2,0" fill="none" stroke="%23374151" stroke-linecap="round" stroke-linejoin="round" stroke-width="8"/></svg>');
      }
    }

    :where(.dark a.external-link):not(:where([class~='not-prose'], [class~='not-prose'] *)) {
      &::after {
        background: url('data:image/svg+xml, <svg viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg"><rect fill="none" height="256" width="256"/><path d="M122.3,71.4l19.8-19.8a44.1,44.1,0,0,1,62.3,62.3l-28.3,28.2a43.9,43.9,0,0,1-62.2,0" fill="none" stroke="%23b0b0b0" stroke-linecap="round" stroke-linejoin="round" stroke-width="8"/><path d="M133.7,184.6l-19.8,19.8a44.1,44.1,0,0,1-62.3-62.3l28.3-28.2a43.9,43.9,0,0,1,62.2,0" fill="none" stroke="%23b0b0b0" stroke-linecap="round" stroke-linejoin="round" stroke-width="8"/></svg>');
      }
    }
  }
}
